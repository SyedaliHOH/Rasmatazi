#!/bin/bash

# Function to generate consolidated Google Dorks for the given domain
generate_dorks_combined() {
  local domain=$1

  # Array of consolidated dorks
  dorks=(
    "site:$domain filetype:pdf | filetype:docx | filetype:xlsx"
    "site:$domain inurl:login | inurl:signin | inurl:register | inurl:admin"
    "site:$domain \"confidential\" | \"internal use only\" | \"sensitive file\""
    "site:$domain intitle:\"index of\""
    'site:$domain inurl:"?id=" | inurl:"?page=" |  inurl:"?type="'
    "site:$domain \"apikey=\" | \"token=\""
    "site:$domain \"404 not found\" | \"403 forbidden\""
    "site:$domain ext:cfg | ext:env | ext:config"
    "site:$domain intitle:\"old version\""
  )

  # Output valid Google search URLs
  for dork in "${dorks[@]}"; do
    echo "https://www.google.com/search?q=$(echo $dork | sed 's/ /+/g')"
  done
}

# Function to open all consolidated search queries in Firefox with a delay
open_in_firefox_with_delay() {
  local domain=$1
  local delay=5  # Adjust the delay in seconds (e.g., 5 seconds)

  echo "Opening dork queries for domain: $domain with a delay of $delay seconds between tabs" >&2

  # Generate dorks and open them in Firefox
  generate_dorks_combined $domain | while read -r url; do
    firefox --new-tab "$url"
    sleep $delay
  done
}

# Main script logic
if [[ $# -lt 1 ]]; then
  echo "Usage: $0 <domain>"
  echo "Example: $0 google.com"
  exit 1
fi

domain=$1

echo "Generating consolidated dorks for domain: $domain" >&2

# Open dork queries in Firefox with a delay
open_in_firefox_with_delay $domain

echo "Done! All consolidated dork pages are now open in Firefox."
